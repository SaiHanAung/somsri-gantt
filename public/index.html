<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GANTT</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@6.1.11/index.global.min.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="tailwindcss.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="icon"
      href="https://somsritshirt.com/wp-content/uploads/2023/02/cropped-favicon-196w-150x150.jpg"
      sizes="32x32"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@100;200;300;400;500;600;700&family=Protest+Riot&family=Sarabun:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@4.9.0/dist/full.min.css"
      rel="stylesheet"
      type="text/css"
    />

    <script src="vue-select.umd.js"></script>
    <link rel="stylesheet" href="vue-select.css" />
  </head>
  <body>
    <div id="app">
      <span
        v-if="loading"
        class="loading loading-spinner loading-lg absolute left-1/2 top-1/2 z-50"
      ></span>
      <div
        class="fixed top-0 left-0 w-full h-full flex items-center justify-center"
        style="z-index: -1"
      >
        <img
          src="https://www.jobbkk.com/upload/employer/0B/ACB/02EACB/images/191179.webp?1356.3000000715256"
          width="500"
          class="opacity-25"
        />
      </div>
      <div class="drawer drawer-end">
        <input id="my-drawer" type="checkbox" class="drawer-toggle" />
        <div class="drawer-content">
          <label
            for="my-drawer"
            class="fixed right-3 btn btn-sm btn-ghost p-0 drawer-button mx-3 my-7"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
              />
            </svg>
          </label>
        </div>
        <div class="drawer-side z-10">
          <label
            for="my-drawer"
            aria-label="close sidebar"
            class="drawer-overlay"
          ></label>
          <ul class="menu w-80 min-h-full bg-white rounded-l-md">
            <div v-if="!isLoggedIn" class="flex items-center justify-center">
              <div class="fixed top-1/2 w-full" style="margin-top: -50px">
                <div
                  class="btn btn-ghost w-full ml-2"
                  onclick="login_modal.showModal()"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-6 h-6"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"
                    />
                  </svg>
                  Login
                </div>
                <div class="divider ml-2">Or</div>
                <div
                  class="btn btn-ghost w-full ml-2"
                  onclick="register_modal.showModal()"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-6 h-6"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"
                    />
                  </svg>
                  Register
                </div>
              </div>
            </div>
            <div v-else>
              <div class="flex items-center justify-center my-1 gap-2">
                <svg
                  width="102"
                  height="22.2"
                  viewBox="0 0 680 148"
                  style="shape-rendering: geometricprecision"
                >
                  <g>
                    <path
                      fill="rgb(51, 51, 51)"
                      d="M272.8495 85.1981L261.0145 53.2891C260.5305 51.9841 258.6855 51.9841 258.2015 53.2891L246.3655 85.1981C246.0025 86.1781 246.7275 87.2201 247.7725 87.2201L271.4435 87.2201C272.4885 87.2201 273.2125 86.1781 272.8495 85.1981M278.3175 103.1321L240.8985 103.1321C240.2705 103.1321 239.7095 103.5221 239.4915 104.1101L232.1245 123.9641C231.9065 124.5521 231.3455 124.9421 230.7185 124.9421L214.5015 124.9421C213.4395 124.9421 212.7135 123.8691 213.1095 122.8841L250.4505 29.8621C250.6785 29.2941 251.2295 28.9211 251.8425 28.9211L267.3725 28.9211C267.9845 28.9211 268.5365 29.2941 268.7645 29.8621L306.1055 122.8831C306.5015 123.8691 305.7755 124.9421 304.7135 124.9421L288.4965 124.9421C287.8695 124.9421 287.3085 124.5521 287.0905 123.9641L279.7235 104.1101C279.5055 103.5221 278.9445 103.1321 278.3175 103.1321M313.7043 61.5684L327.5763 61.5684C328.4053 61.5684 329.0763 62.2404 329.0763 63.0684L329.0763 123.4424C329.0763 124.2704 328.4053 124.9424 327.5763 124.9424L313.7043 124.9424C312.8763 124.9424 312.2043 124.2704 312.2043 123.4424L312.2043 63.0684C312.2043 62.2404 312.8763 61.5684 313.7043 61.5684M379.6682 76.2549C379.6682 77.0829 378.9962 77.7549 378.1682 77.7549L377.7482 77.7549C370.8892 77.7549 365.8582 79.4009 362.6582 82.6929 359.4562 85.9849 357.8572 91.4269 357.8572 99.0169L357.8572 123.4429C357.8572 124.2709 357.1862 124.9429 356.3572 124.9429L342.6222 124.9429C341.7942 124.9429 341.1222 124.2709 341.1222 123.4429L341.1222 63.0679C341.1222 62.2399 341.7942 61.5679 342.6222 61.5679L356.2202 61.5679C357.0492 61.5679 357.7202 62.2399 357.7202 63.0679L357.7202 75.0109 357.9952 75.0109C359.6412 70.0729 362.2472 66.2799 365.8142 63.6259 369.3802 60.9749 373.7702 59.6479 378.9822 59.6479L379.6682 59.6479 379.6682 76.2549zM417.5974 75.6973C416.7694 75.6973 416.0974 76.3693 416.0974 77.1973L416.0974 102.3093C416.0974 104.8703 416.5984 106.6983 417.6064 107.7963 418.6114 108.8933 420.3494 109.4423 422.8184 109.4423L424.1994 109.4423C425.0274 109.4423 425.6994 110.1133 425.6994 110.9423L425.6994 123.5793C425.6994 124.4083 425.0274 125.0793 424.1994 125.0793L418.2914 125.0793C412.1644 125.0793 407.4554 123.5023 404.1634 120.3473 400.8704 117.1923 399.2244 112.5073 399.2244 106.2873L399.2244 77.1973C399.2244 76.3693 398.5534 75.6973 397.7244 75.6973L389.0654 75.6973C388.2364 75.6973 387.5654 75.0253 387.5654 74.1973L387.5654 63.0683C387.5654 62.2403 388.2364 61.5683 389.0654 61.5683L397.7244 61.5683C398.5534 61.5683 399.2244 60.8973 399.2244 60.0683L399.2244 37.6913C399.2244 36.8633 399.8964 36.1913 400.7244 36.1913L414.5974 36.1913C415.4254 36.1913 416.0974 36.8633 416.0974 37.6913L416.0974 60.0683C416.0974 60.8973 416.7694 61.5683 417.5974 61.5683L427.6284 61.5683C428.4574 61.5683 429.1284 62.2403 429.1284 63.0683L429.1284 74.1973C429.1284 75.0253 428.4574 75.6973 427.6284 75.6973L417.5974 75.6973zM481.1191 106.1499C484.2741 102.8579 485.8511 98.5599 485.8511 93.2549 485.8511 87.9529 484.2741 83.6529 481.1191 80.3609 477.9641 77.0689 473.8251 75.4229 468.7041 75.4229 463.5821 75.4229 459.4461 77.0689 456.2901 80.3609 453.1361 83.6529 451.5581 87.9529 451.5581 93.2549 451.5581 98.5599 453.1361 102.8579 456.2901 106.1499 459.4461 109.4419 463.5821 111.0879 468.7041 111.0879 473.8251 111.0879 477.9641 109.4419 481.1191 106.1499M449.0891 123.0219C444.4251 120.3709 440.7431 116.5059 438.0471 111.4309 435.3481 106.3559 434.0001 100.2979 434.0001 93.2549 434.0001 86.2149 435.3481 80.1549 438.0471 75.0799 440.7431 70.0049 444.4251 66.1429 449.0891 63.4889 453.7531 60.8369 458.8731 59.5109 464.4521 59.5109 469.3901 59.5109 473.6191 60.4709 477.1411 62.3919 480.6601 64.3119 483.4721 67.0099 485.5771 70.4849L485.8511 70.4849 485.8511 63.0679C485.8511 62.2399 486.5231 61.5679 487.3511 61.5679L501.0861 61.5679C501.9151 61.5679 502.5861 62.2399 502.5861 63.0679L502.5861 123.4419C502.5861 124.2709 501.9151 124.9419 501.0861 124.9419L487.3511 124.9419C486.5231 124.9419 485.8511 124.2709 485.8511 123.4419L485.8511 116.0259 485.5771 116.0259C483.4721 119.5029 480.6601 122.1989 477.1411 124.1189 473.6191 126.0399 469.3901 126.9999 464.4521 126.9999 458.8731 126.9999 453.7531 125.6729 449.0891 123.0219M559.709 106.1499C562.864 102.8579 564.441 98.5599 564.441 93.2549 564.441 87.9529 562.864 83.6529 559.709 80.3609 556.555 77.0689 552.416 75.4229 547.295 75.4229 542.173 75.4229 538.036 77.0689 534.881 80.3609 531.727 83.6529 530.148 87.9529 530.148 93.2549 530.148 98.5599 531.727 102.8579 534.881 106.1499 538.036 109.4419 542.173 111.0879 547.295 111.0879 552.416 111.0879 556.555 109.4419 559.709 106.1499M538.859 124.1189C535.338 122.1989 532.525 119.5029 530.423 116.0259L530.148 116.0259 530.148 123.4419C530.148 124.2709 529.477 124.9419 528.648 124.9419L514.776 124.9419C513.948 124.9419 513.276 124.2709 513.276 123.4419L513.276 30.4209C513.276 29.5929 513.948 28.9209 514.776 28.9209L528.648 28.9209C529.477 28.9209 530.148 29.5929 530.148 30.4209L530.148 70.4849 530.423 70.4849C532.525 67.0099 535.338 64.3119 538.859 62.3919 542.379 60.4709 546.609 59.5109 551.548 59.5109 557.125 59.5109 562.247 60.8369 566.911 63.4889 571.575 66.1429 575.255 70.0049 577.953 75.0799 580.649 80.1549 582 86.2149 582 93.2549 582 100.2979 580.649 106.3559 577.953 111.4309 575.255 116.5059 571.575 120.3709 566.911 123.0219 562.247 125.6729 557.125 126.9999 551.548 126.9999 546.609 126.9999 542.379 126.0399 538.859 124.1189M605.3721 124.9424L591.5001 124.9424C590.6711 124.9424 590.0001 124.2704 590.0001 123.4424L590.0001 30.4214C590.0001 29.5934 590.6711 28.9214 591.5001 28.9214L605.3721 28.9214C606.2001 28.9214 606.8721 29.5934 606.8721 30.4214L606.8721 123.4424C606.8721 124.2704 606.2001 124.9424 605.3721 124.9424M638.0937 76.2461C635.7937 78.0401 634.2407 80.6301 633.4367 84.0181 633.2157 84.9521 633.9447 85.8481 634.9047 85.8481L661.3047 85.8481C662.2207 85.8481 662.9407 85.0281 662.7927 84.1241 662.2647 80.9191 660.8907 78.3631 658.6697 76.4521 656.0637 74.2121 652.6557 73.0911 648.4497 73.0911 644.2427 73.0911 640.7897 74.1431 638.0937 76.2461M671.9067 68.3581C677.3017 74.2571 679.9997 82.6031 679.9997 93.3921L679.9997 95.1841C679.9997 96.0131 679.3287 96.6841 678.4997 96.6841L634.3957 96.6841C633.4637 96.6841 632.7497 97.5321 632.9107 98.4501 633.6157 102.4581 635.3887 105.6421 638.2307 108.0011 641.4757 110.7001 645.5697 112.0481 650.5077 112.0481 656.8827 112.0481 662.7837 109.5601 668.2097 104.5831 668.8727 103.9751 669.9237 104.1041 670.4377 104.8421L677.1817 114.5221C677.6157 115.1451 677.5237 116.0051 676.9517 116.5051 673.6437 119.4011 669.9947 121.8261 666.0077 123.7761 661.6187 125.9241 656.4507 127.0001 650.5077 127.0001 643.6497 127.0001 637.6577 125.6041 632.5377 122.8161 627.4147 120.0281 623.4377 116.0951 620.6047 111.0191 617.7687 105.9441 616.3517 100.0691 616.3517 93.3921 616.3517 86.7181 617.7237 80.8201 620.4667 75.6971 623.2097 70.5771 627.0507 66.5991 631.9897 63.7631 636.9277 60.9301 642.6887 59.5111 649.2737 59.5111 658.9647 59.5111 666.5097 62.4601 671.9067 68.3581M330.8866 39.2473C330.8866 44.9063 326.2996 49.4933 320.6406 49.4933 314.9816 49.4933 310.3936 44.9063 310.3936 39.2473 310.3936 33.5883 314.9816 29.0013 320.6406 29.0013 326.2996 29.0013 330.8866 33.5883 330.8866 39.2473"
                    ></path>
                    <path
                      fill="rgb(255, 186, 5)"
                      d="M78.9992,1.8675 L13.0402,29.1605 C9.3722,30.6785 9.4102,35.8885 13.1012,37.3515 L79.3362,63.6175 C85.1562,65.9255 91.6372,65.9255 97.4562,63.6175 L163.6922,37.3515 C167.3822,35.8885 167.4212,30.6785 163.7522,29.1605 L97.7942,1.8675 C91.7762,-0.6225 85.0162,-0.6225 78.9992,1.8675"
                    ></path>
                    <path
                      fill="rgb(57, 202, 255)"
                      d="M94.2726,77.9608 L94.2726,143.5768 C94.2726,146.6978 97.4196,148.8348 100.3206,147.6848 L174.1266,119.0368 C175.8116,118.3688 176.9166,116.7408 176.9166,114.9288 L176.9166,49.3128 C176.9166,46.1918 173.7696,44.0548 170.8686,45.2048 L97.0626,73.8528 C95.3786,74.5208 94.2726,76.1488 94.2726,77.9608"
                    ></path>
                    <path
                      fill="rgb(220, 4, 59)"
                      d="M77.0384,81.3464 L55.1344,91.9224 L52.9104,92.9974 L6.6724,115.1524 C3.7414,116.5664 0.0004,114.4304 0.0004,111.1744 L0.0004,49.5884 C0.0004,48.4104 0.6044,47.3934 1.4144,46.6274 C1.7524,46.2884 2.1354,46.0094 2.5334,45.7884 C3.6384,45.1254 5.2144,44.9484 6.5544,45.4784 L76.6704,73.2594 C80.2344,74.6734 80.5144,79.6674 77.0384,81.3464"
                    ></path>
                    <path
                      fill="rgba(0, 0, 0, 0.25)"
                      d="M77.0384,81.3464 L55.1344,91.9224 L1.4144,46.6274 C1.7524,46.2884 2.1354,46.0094 2.5334,45.7884 C3.6384,45.1254 5.2144,44.9484 6.5544,45.4784 L76.6704,73.2594 C80.2344,74.6734 80.5144,79.6674 77.0384,81.3464"
                    ></path>
                  </g>
                </svg>
                <a
                  id="base-config"
                  class="tooltip tooltip-left"
                  data-tip="วิธีกำหนดข้อมูลให้มาแสดงหน้านี้"
                  href="base-config.html"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-5 h-5"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"
                    />
                  </svg>
                </a>
              </div>
              <ul v-cloak class="menu">
                <li v-for="(g, gi) in gantts" :key="'gantt_'+gi">
                  <details open>
                    <summary>
                      <div class="tooltip" data-tip="ชื่อ Base">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          viewBox="0 0 24 24"
                          fill="currentColor"
                          class="w-6 h-6"
                        >
                          <path
                            d="M21 6.375c0 2.692-4.03 4.875-9 4.875S3 9.067 3 6.375 7.03 1.5 12 1.5s9 2.183 9 4.875Z"
                          />
                          <path
                            d="M12 12.75c2.685 0 5.19-.586 7.078-1.609a8.283 8.283 0 0 0 1.897-1.384c.016.121.025.244.025.368C21 12.817 16.97 15 12 15s-9-2.183-9-4.875c0-.124.009-.247.025-.368a8.285 8.285 0 0 0 1.897 1.384C6.809 12.164 9.315 12.75 12 12.75Z"
                          />
                          <path
                            d="M12 16.5c2.685 0 5.19-.586 7.078-1.609a8.282 8.282 0 0 0 1.897-1.384c.016.121.025.244.025.368 0 2.692-4.03 4.875-9 4.875s-9-2.183-9-4.875c0-.124.009-.247.025-.368a8.284 8.284 0 0 0 1.897 1.384C6.809 15.914 9.315 16.5 12 16.5Z"
                          />
                          <path
                            d="M12 20.25c2.685 0 5.19-.586 7.078-1.609a8.282 8.282 0 0 0 1.897-1.384c.016.121.025.244.025.368 0 2.692-4.03 4.875-9 4.875s-9-2.183-9-4.875c0-.124.009-.247.025-.368a8.284 8.284 0 0 0 1.897 1.384C6.809 19.664 9.315 20.25 12 20.25Z"
                          />
                        </svg>
                      </div>
                      {{ g.base_name }}
                    </summary>
                    <ul>
                      <li v-for="tb in g.tables" :key="'table_'+tb.table_id">
                        <details open>
                          <summary>
                            <div class="tooltip" data-tip="ชื่อ Table">
                              <svg
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                class="w-6 h-6"
                              >
                                <path
                                  stroke-linecap="round"
                                  stroke-linejoin="round"
                                  d="M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"
                                />
                              </svg>
                            </div>
                            {{ tb.table_name }}
                          </summary>
                          <ul>
                            <li
                              v-for="(v, vi) in tb.views.sort((a,b) => a.button_sort - b.button_sort)"
                              :key="'view_' + vi + v.button_name"
                              @click="showGantt(v);"
                              :class="{'bg-[#e5e5e5] rounded-lg': tabActive?.button_name == v.button_name}"
                            >
                              <a>{{v.button_name}}</a>
                            </li>
                          </ul>
                        </details>
                      </li>
                    </ul>
                  </details>
                </li>
              </ul>
            </div>
            <div class="flex items-center justify-center">
              <ul class="fixed bottom-2 menu-horizontal">
                <div
                  v-if="isLoggedIn"
                  class="flex items-center justify-center gap-2"
                >
                  <div
                    class="dropdown dropdown-hover dropdown-top dropdown-end"
                  >
                    <span>{{ user.email }}</span>
                    <div
                      class="dropdown-content z-[1] menu p-2 shadow bg-base-200 rounded-box min-w-max"
                    >
                      <span>UID : {{ user.uid }}</span>
                    </div>
                  </div>
                  <li class="tooltip" data-tip="ออกจากระบบ">
                    <a class="p-2" id="sign-out" @click="signOut()">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke-width="1.5"
                        stroke="currentColor"
                        class="w-6 h-6"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"
                        />
                      </svg>
                    </a>
                  </li>
                  <li class="tooltip" data-tip="ตั้งค่า">
                    <a
                      class="p-2"
                      id="open_setting_modal"
                      onclick="setting_modal.showModal()"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                        class="w-6 h-6"
                      >
                        <path
                          d="M6 12a.75.75 0 0 1-.75-.75v-7.5a.75.75 0 1 1 1.5 0v7.5A.75.75 0 0 1 6 12ZM18 12a.75.75 0 0 1-.75-.75v-7.5a.75.75 0 0 1 1.5 0v7.5A.75.75 0 0 1 18 12ZM6.75 20.25v-1.5a.75.75 0 0 0-1.5 0v1.5a.75.75 0 0 0 1.5 0ZM18.75 18.75v1.5a.75.75 0 0 1-1.5 0v-1.5a.75.75 0 0 1 1.5 0ZM12.75 5.25v-1.5a.75.75 0 0 0-1.5 0v1.5a.75.75 0 0 0 1.5 0ZM12 21a.75.75 0 0 1-.75-.75v-7.5a.75.75 0 0 1 1.5 0v7.5A.75.75 0 0 1 12 21ZM3.75 15a2.25 2.25 0 1 0 4.5 0 2.25 2.25 0 0 0-4.5 0ZM12 11.25a2.25 2.25 0 1 1 0-4.5 2.25 2.25 0 0 1 0 4.5ZM15.75 15a2.25 2.25 0 1 0 4.5 0 2.25 2.25 0 0 0-4.5 0Z"
                        />
                      </svg>
                    </a>
                  </li>
                </div>
              </ul>
            </div>
          </ul>
        </div>
      </div>
      <div
        id="calendar"
        class="z-20"
        style="margin-top: 20px; margin-bottom: 0"
      ></div>

      <!-- MODAL -->
      <dialog id="login_modal" class="modal text-[#a52241]">
        <div class="modal-box">
          <div class="flex justify-center">
            <span class="font-bold text-lg">Login เพื่อดู Gantt chart</span>
          </div>
          <form @submit.prevent="login('login_modal')">
            <div class="pt-4">
              <div class="join w-full">
                <span class="btn btn-sm join-item rounded-r-full cursor-default"
                  >Email</span
                >
                <input
                  type="email"
                  class="btn btn-sm input text-left cursor-text input-bordered join-item w-full text-black"
                  v-model="user.email"
                  placeholder="ช่องกรอก Email"
                  required
                />
              </div>
            </div>
            <div class="pt-4">
              <div class="join w-full">
                <span class="btn btn-sm join-item rounded-r-full cursor-default"
                  >Password</span
                >
                <input
                  type="password"
                  class="btn btn-sm input input-bordered cursor-text join-item w-full text-left text-black"
                  v-model="user.password"
                  placeholder="ช่องกรอก Password"
                  required
                />
              </div>
            </div>
            <div v-if="user.err" class="pt-4 text-center">{{ user.err }}</div>
            <div class="grid mt-4">
              <div
                class="btn btn-sm bg-[#a52241] text-white hover:text-[#a52241] hover:bg-white hover:border-[#a52241]"
                @click="login('login_modal')"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-5 h-5"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"
                  />
                </svg>
                <input class="cursor-pointer" type="submit" value="Login" />
              </div>
            </div>
          </form>
        </div>
        <form method="dialog" class="modal-backdrop" @click="resetUserInput()">
          <button>close</button>
        </form>
      </dialog>
      <dialog id="register_modal" class="modal text-[#a52241]">
        <div class="modal-box">
          <div class="flex justify-center">
            <span class="font-bold text-lg">Register เพื่อดู Gantt chart</span>
          </div>
          <form @submit.prevent="register('register_modal')">
            <div class="pt-4">
              <div class="join w-full">
                <span class="btn btn-sm join-item rounded-r-full cursor-default"
                  >Email</span
                >
                <input
                  type="email"
                  class="btn btn-sm input text-left cursor-text input-bordered join-item w-full text-black"
                  v-model="user.email"
                  placeholder="ช่องกรอก Email"
                  required
                />
              </div>
            </div>
            <div class="pt-4">
              <div class="join w-full">
                <span class="btn btn-sm join-item rounded-r-full cursor-default"
                  >Password</span
                >
                <input
                  type="password"
                  class="btn btn-sm input input-bordered cursor-text join-item w-full text-left text-black"
                  v-model="user.password"
                  placeholder="ช่องกรอก Password"
                  required
                />
              </div>
            </div>
            <div class="grid mt-4">
              <div
                class="btn btn-sm bg-[#a52241] text-white hover:text-[#a52241] hover:bg-white hover:border-[#a52241]"
                @click="register('register_modal')"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-5 h-5"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"
                  />
                </svg>
                <input class="cursor-pointer" type="submit" value="Register" />
              </div>
            </div>
          </form>
        </div>
        <form method="dialog" class="modal-backdrop" @click="resetUserInput()">
          <button>close</button>
        </form>
      </dialog>
      <dialog id="setting_modal" class="modal text-[#a52241]">
        <div class="modal-box">
          <div class="flex justify-between">
            <span class="font-bold text-lg">Setting เพื่อดู Gantt chart</span>
            <div class="flex items-center gap-1">
              <a
                id="create_token"
                class="no-underline hover:underline"
                href="https://airtable.com/create/tokens"
                target="_blank"
                rel="noopener noreferrer"
                >Create token</a
              >
              <a
                id="how-to-create-token"
                class="tooltip tooltip-left"
                data-tip="วิธี Create token"
                href="howto.html"
                target="_blank"
                rel="noopener noreferrer"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-5 h-5"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"
                  />
                </svg>
              </a>
            </div>
          </div>
          <form @submit.prevent="setting('setting_modal')">
            <div class="pt-4">
              <div class="join w-full">
                <input
                  class="btn input text-left cursor-text input-bordered join-item w-full text-black"
                  v-model="user.airtable_token"
                  placeholder="ช่องกรอก Airtable token"
                  required
                />
                <span
                  :class="['btn join-item rounded-l-full', {'bg-green-500 text-white': user.verify_token}]"
                  @click="verifyToken()"
                >
                  {{ !user.verify_token ? 'ตรวจสอบ Token' : 'Token ถูกต้อง' }}
                </span>
              </div>
            </div>
            <div v-if="user.err" class="pt-4 text-center">{{ user.err }}</div>
            <div class="grid mt-4">
              <div
                class="btn bg-[#a52241] text-white hover:text-[#a52241] hover:bg-white hover:border-[#a52241]"
                @click="setting('setting_modal')"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-6 h-6"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"
                  />
                </svg>
                <input class="cursor-pointer" type="submit" value="บันทึก" />
              </div>
            </div>
          </form>
        </div>
        <form method="dialog" class="modal-backdrop" @click="checkOldToken()">
          <button>close</button>
        </form>
      </dialog>
      <dialog id="filter_modal" class="modal text-[#a52241]">
        <div class="modal-box min-w-max">
          <div class="flex justify-between">
            <span class="font-bold text-lg"
              >เพิ่มเงื่อนไขตัวกรองข้อมูล {{ tabActive?.button_name }}</span
            >
          </div>
          <form @submit.prevent="saveFilter()" class="text-black h-80">
            <template v-for="(f, fi) in filters" :key="'filter_' + fi">
              <div class="pt-4 flex items-center gap-2">
                <div v-if="fi > 0">
                  <select class="select w-full max-w-xs" v-model="f.more">
                    <option selected value="AND">และ</option>
                    <option value="OR">หรือ</option>
                  </select>
                </div>
                <div class="join flex items-center">
                  <div class="dropdown join-item" @click="searchField = ''">
                    <div
                      tabindex="0"
                      role="button"
                      class="btn btn-ghost border-1 border-r-0 border-inherit rounded-e-none"
                    >
                      {{ f.field_name }}
                    </div>
                    <ul
                      tabindex="0"
                      class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52 h-44 grid content-start"
                    >
                      <li>
                        <a>
                          <input
                            type="text"
                            placeholder="ค้นหา"
                            v-model="searchField"
                            class="input input-bordered input-xs w-full max-w-xs"
                          />
                        </a>
                      </li>
                      <div class="overflow-x-scroll">
                        <li
                          v-for="fs in filteredSearchField"
                          :key="'li_radio_' + fs"
                          @click="f.field_name = fs"
                        >
                          <a>{{ fs }}</a>
                        </li>
                      </div>
                    </ul>
                  </div>
                  <select
                    v-model="f.operator"
                    class="select select-bordered join-item"
                  >
                    <option disabled selected>เงื่อนไข</option>
                    <option value="=">เท่ากับ</option>
                    <option value="!=">ไม่เท่ากับ</option>
                  </select>
                  <div>
                    <div>
                      <input
                        v-model="f.value"
                        class="input input-bordered join-item"
                        placeholder="ค่า"
                      />
                    </div>
                  </div>
                </div>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-7 h-7 btn btn-sm btn-circle btn-ghost"
                  @click="filters.splice(fi, 1)"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M6 18 18 6M6 6l12 12"
                  />
                </svg>
              </div>
            </template>
            <div
              :class="['grid gap-5 mt-4', {'grid-cols-2' : filters.length !== 2}]"
            >
              <div
                v-if="filters.length < 2"
                class="btn bg-[#a52241] text-white hover:text-[#a52241] hover:bg-white hover:border-[#a52241]"
                @click="addFilter()"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-6 h-6"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 4.5v15m7.5-7.5h-15"
                  />
                </svg>

                <input
                  class="cursor-pointer"
                  type="button"
                  value="เพิ่มเงื่อนไข"
                />
              </div>
              <div
                class="btn bg-[#a52241] text-white hover:text-[#a52241] hover:bg-white hover:border-[#a52241]"
                @click="saveFilter()"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-6 h-6"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"
                  />
                </svg>
                <input
                  class="cursor-pointer"
                  type="submit"
                  value="บันทึกลง Airtable"
                />
              </div>
            </div>
          </form>
        </div>
        <form method="dialog" class="modal-backdrop">
          <button>close</button>
        </form>
      </dialog>
      <dialog id="project_gantt" class="modal">
        <div class="modal-box w-[95%] max-w-[100%] h-[95%] max-h-[100%]">
          <form method="dialog">
            <button
              class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2"
            >
              ✕
            </button>
          </form>
          <h3 class="font-bold text-2xl">
            Gantt โปรเจกต์ {{ viewProject.name }}
          </h3>
          <div id="project_calendar" class="z-20"></div>
        </div>
      </dialog>
      <dialog id="setting_project_gantt_modal" class="modal">
        <div class="modal-box w-2/3 max-w-[100%]">
          <form method="dialog" @click="resetGroupEvent()">
            <button
              class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2"
            >
              ✕
            </button>
          </form>
          <h3 class="font-bold text-lg">
            ตั้งค่าการแสดงผลโปรเจกต์บน Gantt นี้
          </h3>
          <form @submit.prevent="" class="py-4 px-2 h-[32rem] overflow-y-auto">
            <div
              class="grid grid-cols-3 gap-x-5"
              v-for="(pg, pgIndex) in projectGroups"
              :key="'project-group-' + pgIndex"
            >
              <label class="form-control w-full">
                <div class="label">
                  <span class="label-text">
                    <div
                      :class="['px-2 rounded-lg', pg.text_color ? `text-[${pg.text_color}]` : '', pg.bg_color ? `bg-[${pg.bg_color}]` : 'bg-base-300']"
                    >
                      {{ pgIndex + 1 }} ชื่อการแสดงผล
                    </div>
                  </span>
                </div>
                <input
                  v-model="pg.group_name"
                  type="text"
                  placeholder="กรอกชื่อการแสดงผล"
                  class="input input-bordered w-full"
                />
              </label>
              <label class="form-control w-full">
                <div class="label">
                  <span class="label-text">
                    <div
                      :class="['px-2 rounded-lg', pg.text_color ? `text-[${pg.text_color}]` : '', pg.bg_color ? `bg-[${pg.bg_color}]` : 'bg-base-300']"
                    >
                      {{ pgIndex + 1 }} ชื่อฟิลด์ของวันที่เริ่ม
                    </div>
                  </span>
                </div>
                <div class="dropdown input-bordered" @click="searchField = ''">
                  <div
                    tabindex="0"
                    role="button"
                    class="btn btn-ghost border-1 border-inherit rounded-lg w-full flex justify-start font-normal text-base"
                  >
                    <span>
                      {{ pg.field_start ? pg.field_start : 'เลือกฟิลด์' }}
                    </span>
                  </div>
                  <ul
                    tabindex="0"
                    class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-60 h-48 grid content-start"
                  >
                    <li>
                      <a>
                        <input
                          type="text"
                          placeholder="ค้นหา"
                          v-model="searchField"
                          class="input input-bordered h-7 w-full"
                        />
                      </a>
                    </li>
                    <div class="overflow-x-scroll">
                      <li
                        v-for="fs in filteredSearchField"
                        :key="'settinng_project_group_li_radio_field_start_' + fs"
                        @click="pg.field_start = fs"
                      >
                        <a>{{ fs }}</a>
                      </li>
                    </div>
                  </ul>
                </div>
              </label>
              <label class="form-control w-full">
                <div class="label">
                  <span class="label-text">
                    <div
                      :class="['px-2 rounded-lg', pg.text_color ? `text-[${pg.text_color}]` : '', pg.bg_color ? `bg-[${pg.bg_color}]` : 'bg-base-300']"
                    >
                      {{ pgIndex + 1 }} ชื่อฟิลด์ของวันที่จบ
                    </div>
                  </span>
                </div>
                <div class="dropdown input-bordered" @click="searchField = ''">
                  <div
                    tabindex="0"
                    role="button"
                    class="btn btn-ghost border-1 border-inherit rounded-lg w-full flex justify-start font-normal text-base"
                  >
                    <span>
                      {{ pg.field_end ? pg.field_end : 'เลือกฟิลด์' }}
                    </span>
                  </div>
                  <ul
                    tabindex="0"
                    class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-60 h-48 grid content-start"
                  >
                    <li>
                      <a>
                        <input
                          type="text"
                          placeholder="ค้นหา"
                          v-model="searchField"
                          class="input input-bordered h-7 w-full"
                        />
                      </a>
                    </li>
                    <div class="overflow-x-scroll">
                      <li
                        v-for="fs in filteredSearchField"
                        :key="'settinng_project_group_li_radio_field_end_' + fs"
                        @click="pg.field_end = fs"
                      >
                        <a>{{ fs }}</a>
                      </li>
                    </div>
                  </ul>
                </div>
              </label>
              <div class="col-span-3 divider">
                <div class="dropdown">
                  <div tabindex="0" role="button" class="btn btn-sm btn-ghost">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 24 24"
                      fill="currentColor"
                      class="w-5 h-5"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M20.599 1.5c-.376 0-.743.111-1.055.32l-5.08 3.385a18.747 18.747 0 0 0-3.471 2.987 10.04 10.04 0 0 1 4.815 4.815 18.748 18.748 0 0 0 2.987-3.472l3.386-5.079A1.902 1.902 0 0 0 20.599 1.5Zm-8.3 14.025a18.76 18.76 0 0 0 1.896-1.207 8.026 8.026 0 0 0-4.513-4.513A18.75 18.75 0 0 0 8.475 11.7l-.278.5a5.26 5.26 0 0 1 3.601 3.602l.502-.278ZM6.75 13.5A3.75 3.75 0 0 0 3 17.25a1.5 1.5 0 0 1-1.601 1.497.75.75 0 0 0-.7 1.123 5.25 5.25 0 0 0 9.8-2.62 3.75 3.75 0 0 0-3.75-3.75Z"
                        clip-rule="evenodd"
                      />
                    </svg>
                  </div>
                  <div
                    tabindex="0"
                    class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-40 space-y-3"
                  >
                    <label
                      class="input input-bordered flex items-center gap-2 w-full"
                    >
                      สีตัวอักษร
                      <input
                        type="color"
                        class="grow"
                        v-model="pg.text_color"
                      />
                    </label>
                    <label
                      class="input input-bordered flex items-center gap-2 w-full"
                    >
                      สีพื้นหลัง
                      <input type="color" class="grow" v-model="pg.bg_color" />
                    </label>
                  </div>
                </div>

                <div
                  class="flex hover:text-[#a52241] hover:cursor-pointer"
                  @click="projectGroups.splice(pgIndex, 1)"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-5 h-5"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"
                    />
                  </svg>
                  <span> ลบกลุ่ม {{ pgIndex + 1 }} </span>
                </div>
              </div>
            </div>
            <div class="grid grid-cols-2 justify-items-stretch">
              <button
                :class="['btn w-max px-20', projectGroups.length > 0 ? 'justify-self-end me-10' : 'justify-self-center col-span-2']"
                @click="addSettingProjectGroup()"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-6 h-6"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 4.5v15m7.5-7.5h-15"
                  />
                </svg>
                เพิ่มกลุ่ม
              </button>
              <div
                v-if="projectGroups.length > 0"
                class="btn w-max px-20 justify-self-start ms-10 bg-[#a52241] text-white hover:text-[#a52241] hover:bg-white hover:border-[#a52241]"
                @click="saveSettingProjectGroup()"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-6 h-6"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"
                  />
                </svg>
                <input
                  class="cursor-pointer"
                  type="submit"
                  value="บันทึกลง Airtable"
                />
              </div>
            </div>
          </form>
        </div>
      </dialog>
    </div>

    <script type="module" src="index.js"></script>
  </body>
</html>
